# 代理人工作策略：檔案長度處理指南

## 🎯 核心問題解決

### 問題背景
當處理大型文檔（>500行）時，直接編輯可能遇到以下挑戰：
- 檔案過長導致編輯工具限制
- 內容變更範圍廣泛，風險較高
- 需要大量多點修改的複雜任務

### 解決策略
採用「**新建檔案→完成後取代**」的安全工作流程。

---

## 📋 各代理人具體指導

### 🎨 content-optimizer (內容優化專家)

#### 處理策略
```markdown
**檔案長度判斷**：
- 超過400行：啟用新建檔案策略
- 需要大幅重構：必須使用新建檔案策略
- 多點深度修改：優先考慮新建檔案策略

**執行流程**：
1. 讀取原始檔案，全面理解內容
2. 創建新檔案：`原檔名_優化版.md`
3. 在新檔案中進行完整優化工作
4. 完成後進行品質檢查
5. 確認無誤後，將新檔案重新命名取代原檔案
```

#### 使用時機
- PDCA循環中的深度內容整合
- 大範圍去重和結構調整
- 全文檔格式標準化作業

### 🔧 document-restructurer (文檔重組專家)

#### 處理策略
```markdown
**重組複雜度評估**：
- 章節重新排序：使用新建檔案
- 大量內容移動：使用新建檔案
- 結構性調整：使用新建檔案

**執行流程**：
1. 分析原檔案結構和重組需求
2. 創建新檔案：`原檔名_重組版.md`
3. 按新結構重新組織內容
4. 確保所有原始內容正確遷移
5. 驗證邏輯完整性後取代原檔案
```

#### 特殊注意
- 必須確保內容零遺失
- 保持所有連結和引用的正確性
- 維護原有的語調和風格

### 🎯 style-unifier (風格統一專家)

#### 處理策略
```markdown
**統一範圍判斷**：
- 全文檔風格調整：使用新建檔案
- 跨章節術語統一：使用新建檔案
- 大量格式標準化：使用新建檔案

**執行流程**：
1. 建立風格統一標準檢查清單
2. 創建新檔案：`原檔名_風格統一版.md`
3. 逐步應用統一標準
4. 進行一致性驗證
5. 完成後取代原檔案
```

### 🔍 quality-validator (品質驗證專家)

#### 處理策略
```markdown
**驗證改進建議**：
- 當發現需要大幅修改時，建議使用新建檔案策略
- 提供具體的檔案處理建議給其他代理人
- 在驗證報告中標註建議的處理方式

**驗證流程**：
1. 對比原檔案和新建檔案
2. 確認所有改進目標達成
3. 檢查是否有內容遺失或錯誤
4. 提供最終品質評分
```

### 🧭 navigation-fixer (導航修復專家)

#### 處理策略
```markdown
**導航更新範圍**：
- 全專案導航重建：分檔案逐一新建
- 多檔案連結更新：使用新建檔案策略
- 複雜導航結構調整：必須使用新建檔案

**執行流程**：
1. 設計新的導航架構
2. 為每個需要更新的檔案創建新版本
3. 在新檔案中實施導航更新
4. 測試所有連結的正確性
5. 批次取代原檔案
```

---

## 🛡️ 安全保障機制

### 檔案備份策略
```markdown
**執行前**：
- 自動創建原檔案備份：`原檔名_backup_YYYYMMDD.md`
- 記錄原始檔案狀態快照
- 建立變更追蹤日誌

**執行中**：
- 保持原檔案不變，直到新檔案完全完成
- 定期保存新檔案進度
- 記錄關鍵變更點

**執行後**：
- 驗證新檔案品質
- 確認取代成功
- 保留備份檔案一個週期
```

### 品質檢查流程
```markdown
**新建檔案必檢項目**：
- [ ] 內容完整性：無遺失、無重複
- [ ] 格式正確性：符合Markdown標準
- [ ] 連結有效性：所有內部外部連結正確
- [ ] 語調一致性：保持原有專業風格
- [ ] 結構邏輯性：章節順序合理
```

---

## 📝 標準作業流程模板

### 代理人執行範本
```markdown
## 檔案處理決策

**原檔案**：`檔案名.md` (XXX行)
**處理方式**：☑ 新建檔案策略 / ☐ 直接編輯
**原因**：檔案長度XXX行，需要進行YYY類型的大幅調整

## 執行步驟

1. **準備階段**
   - [x] 讀取並理解原檔案內容
   - [x] 創建備份：`檔案名_backup_20250804.md`
   - [x] 建立新檔案：`檔案名_新版本.md`

2. **實施階段**
   - [x] 在新檔案中進行所有必要修改
   - [x] 確保內容邏輯完整性
   - [x] 應用品質標準

3. **驗證階段**
   - [x] 內容完整性檢查
   - [x] 格式標準驗證
   - [x] 連結有效性測試

4. **完成階段**
   - [x] 將新檔案重新命名為原檔名
   - [x] 確認取代成功
   - [x] 更新相關文檔索引
```

---

## 🎯 實施建議

### 觸發條件
**必須使用新建檔案策略的情況**：
- 檔案超過400行且需要大量修改
- 結構性重組調整
- 跨章節的系統性變更
- 風格或格式的全面統一

### 效益評估
**使用新建檔案策略的優勢**：
- ✅ 降低修改風險，保護原始內容
- ✅ 提供完整的變更追蹤
- ✅ 可以並行處理多個檔案
- ✅ 便於品質檢查和驗證
- ✅ 支援快速回滾和復原

### 注意事項
- 確保新檔案命名清晰，避免混淆
- 定期檢查磁盤空間，清理臨時檔案
- 保持變更記錄的完整性
- 與其他代理人協調，避免同時處理同一檔案

---

**透過這個標準化的檔案處理策略，各代理人可以安全高效地處理大型文檔的複雜變更任務，確保專案品質和進度的雙重保障。**

*建立日期：2025年8月4日*
*適用於：全專案PDCA改進計劃執行*